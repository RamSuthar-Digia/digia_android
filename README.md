<!-- Local asset image -->

[![Banner](docs/images/readme_header.png)](https://www.digia.tech)

[![JitPack](https://jitpack.io/v/Digia-Technology-Private-Limited/digia_ui_compose.svg)](https://jitpack.io/#Digia-Technology-Private-Limited/digia_ui_compose)
[![License](https://img.shields.io/badge/license-BSL%201.1-green.svg)](LICENSE)
[![Documentation](https://img.shields.io/badge/docs-digia.tech-blue.svg)](https://docs.digia.tech)

**Digia UI SDK** is the Jetpack Compose-based rendering engine for [Digia Studio](https://app.digia.tech), a low-code mobile application platform. Built on the Server-Driven UI (SDUI) architecture, this SDK dynamically renders native Compose widgets based on configurations received from the server, enabling real-time UI updates without requiring app releases or store approvals.

# ğŸš€ Overview

### What is Server-Driven UI?

Server-Driven UI (SDUI) is an architectural pattern where the server controls the presentation layer of your application by sending UI configurations that the client interprets and renders. This approach offers several key advantages:

- **ğŸš€ Instant Updates** - Deploy UI changes immediately without app store review cycles
- **ğŸ§ª A/B Testing** - Run experiments and personalize experiences without client-side release cycles
- **ğŸ”§ Bug Fixes** - Fix UI issues in production without releasing a new app version
- **ğŸ“± Cross-Platform Consistency** - Ensure uniform experiences across Android, iOS, and Mobile Web from a single configuration

### The Digia Ecosystem

Digia UI SDK is part of the Digia Studio ecosystem, where:

1. **Digia Studio** - A visual low-code tool where users drag and drop widgets to create mobile applications
2. **Server Configurations** - The studio generates structured configurations describing UI layout, data bindings, and business logic
3. **Digia UI SDK** - This Android SDK interprets the server configurations to render fully functional native mobile apps

### Key Features

- ğŸ¨ **Server-Driven UI** - Render Jetpack Compose widgets from server-side configurations
- ğŸ”„ **Instant Updates** - Push UI and logic changes instantly without app store approvals
- ğŸ”— **Expression Binding** - Powerful data binding system for dynamic content
- ğŸ¯ **Pre-built Actions** - Navigation, state management, API calls, and more
- ğŸ“± **Native Performance** - Rendering handled directly by Compose for optimal performance
- ğŸ§© **Custom Widgets** - Register your own Composables to extend functionality
- ğŸŒ **Multi-Platform** - Single codebase for Android, iOS, and Mobile Web

## ğŸ“¦ Installation

### 1. Add to Your Project

Add the JitPack repository to your build file:

```kotlin
// settings.gradle.kts
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        mavenCentral()
        maven { url = uri("https://jitpack.io") }
    }
}
```

### 2. Add Dependency

Add the Digia UI Compose dependency to your app-level `build.gradle.kts`:

```kotlin
dependencies {
    implementation("com.github.Digia-Technology-Private-Limited:digia_ui_compose:v1.0.0-beta.1")
}
```

## ğŸ Getting Started

> **Note**: Digia UI SDK requires configurations generated by [Digia Studio](https://app.digia.tech). Please refer to the [Digia Studio documentation](https://docs.digia.tech) to create your first project.

### Initialization of DigiaUI SDK

DigiaUI SDK offers initialization strategies to suit different application needs via the `Flavor` configuration.

#### Strategies

- **NetworkFirstStrategy**: Prioritizes fresh content from the network. Best for production.
- **CacheFirstStrategy**: Uses cached configuration for instant startup. Best for offline capability.

### Implementation

Initialize the SDK in your Application class or main Activity.

```kotlin
class MyApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        
        // Initialize Digia UI on a background thread
        CoroutineScope(Dispatchers.IO).launch {
             val digiaUI = DigiaUI.initialize(
                DigiaUIOptions(
                    context = applicationContext,
                    accessKey = "YOUR_PROJECT_ACCESS_KEY",
                    // Use Debug flavor for development
                    flavor = Flavor.Debug(),
                    // Or Release flavor for production with specific strategy
                    // flavor = Flavor.Release(
                    //    initStrategy = NetworkFirstStrategy(timeout = 2000),
                    //    appConfigPath = "app_config.json", 
                    //    functionsPath = "functions.json"
                    // )
                )
            )
            
            // Initialize the global manager
            DigiaUIManager.initialize(digiaUI)
            
            // Initialize the Factory with default configuration
            withContext(Dispatchers.Main) {
                 DUIFactory.getInstance().initialize()
            }
        }
    }
}
```

## ğŸ› ï¸ Usage Patterns

Digia UI SDK supports two integration patterns:

### 1. Full App Mode

Build your whole application using Digia UI. Set the content of your `MainActivity` to the initial page.

```kotlin
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            // Renders the initial page defined in your Digia Studio config
            DUIFactory.getInstance().CreateInitialPage()
            
            // Or use NavHost for full navigation support
            // DUIFactory.getInstance().CreateNavHost()
        }
    }
}
```

### 2. Hybrid Mode

Migrate pages incrementally by mixing native Compose screens with Digia UI pages.

```kotlin
// Inside your native Composable
Button(onClick = {
    navController.navigate("checkout_route")
}) {
    Text("Go to Checkout")
}

// In your NavHost
composable("checkout_route") {
    // Render a specific Digia UI page
    DUIFactory.getInstance().CreatePage(
        pageId = "checkout_page",
        pageArgs = mapOf(
            "cartId" to "12345",
            "userId" to "user_001"
        )
    )
}
```

## ğŸ“„ Creating Pages

Pages are complete, full-screen UI definitions that include lifecycle hooks and built-in state management.

```kotlin
// Create a page with arguments
DUIFactory.getInstance().CreatePage(
    pageId = "product_details",
    pageArgs = mapOf(
        "productId" to product.id,
        "source" to "recommendations"
    )
)
```

## ğŸ§© Creating Components

Components are modular UI elements that you can reuse throughout your app.

```kotlin
LazyColumn {
    items(products) { product ->
        // Render a Digia UI component for each item
        DUIFactory.getInstance().CreateComponent(
            componentId = "product_list_item",
            args = mapOf(
                "title" to product.title,
                "price" to product.price,
                "imageUrl" to product.imageUrl,
                "onAdd" to { addToCart(product) }
            )
        )
    }
}
```

## ğŸ—‚ï¸ State Management

Digia UI provides a comprehensive state management system.

### Global State (App State)

Shared across the entire app. You can interact with it from native code using `DUIAppState`.

**Setting State from Native Code:**

```kotlin
fun updateCart(count: Int) {
    // Sync with Digia UI - immediately reflected in all pages
    DUIAppState.instance.update("cartCount", count)
}
```

**Listening to State Changes:**

```kotlin
// In a Composable
val cartCount by DUIAppState.instance.stream<Int>("cartCount")
    .collectAsState(initial = 0)

Text("Cart Items: $cartCount")
```

### Page & Component State

- **Page State**: Scoped to individual pages. 
- **Component State**: Local state for reusable components. 

These are managed automatically by the Digia UI engine based on your Digia Studio configuration.

## ğŸ¨ Custom Widget Registration

Extend Digia UI with your own custom Composables:

```kotlin
// 1. Register your widget (e.g., in Application.onCreate)
DUIFactory.getInstance().registerWidget("custom/map") { props, registry ->
    // Extract props safely
    val lat = props["latitude"] as? Double ?: 0.0
    val lng = props["longitude"] as? Double ?: 0.0
    
    // Return your Composable
    GoogleMap(
        cameraPositionState = rememberCameraPositionState {
            position = CameraPosition.fromLatLngZoom(LatLng(lat, lng), 10f)
        }
    )
}
```

## ğŸ“„ License

This project is licensed under the Business Source License 1.1 (BSL 1.1) - see the [LICENSE](LICENSE) file for details. The BSL 1.1 allows personal and commercial use with certain restrictions around competing platforms. On August 5, 2029, the license will automatically convert to Apache License 2.0.

For commercial licensing inquiries or exceptions, please contact admin@digia.tech.

## ğŸ†˜ Support

- ğŸ“š [Documentation](https://docs.digia.tech)
- ğŸ’¬ [Community](https://discord.gg/szgbr63a)
- ğŸ› [Issue Tracker](https://github.com/Digia-Technology-Private-Limited/digia_ui/issues)
- ğŸ“§ [Contact Support](mailto:admin@digia.tech)

---

Built with â¤ï¸ by the Digia team
